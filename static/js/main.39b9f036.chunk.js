(this["webpackJsonpspacex-app"]=this["webpackJsonpspacex-app"]||[]).push([[0],{10:function(e,t,a){e.exports={header:"styles_header__D7Cd9",headerTitle:"styles_headerTitle__22Tb8",button_burger:"styles_button_burger__1i_19",launches_stats:"styles_launches_stats__2YUG7"}},15:function(e,t,a){e.exports={app:"styles_app__1VXZu",error_message:"styles_error_message__cFkPk"}},23:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(12),o=a.n(s),c=a(11),i=a(5),u=a(10),h=a.n(u),l=a(9),d=a(3),f=Object(c.a)((function(){return Object(d.jsxs)("header",{className:h.a.header,children:[Object(d.jsx)("button",{className:h.a.button_burger,onClick:function(){i.b.sidebarIsOpen?i.b.toggleSidebar(!1):i.b.toggleSidebar(!0)},children:i.b.sidebarIsOpen?Object(d.jsx)("i",{className:"fas fa-times"}):Object(d.jsx)("i",{className:"fas fa-bars"})}),Object(d.jsxs)("h1",{className:h.a.headerTitle,children:[Object(d.jsx)("i",{className:"fas fa-space-shuttle"}),"SpaceX App"]}),Object(d.jsxs)("div",{className:h.a.launches_stats,children:[Object(d.jsxs)("p",{children:["Launches: ",l.a.totalLaunches]}),Object(d.jsxs)("p",{children:["Rockets: ",l.a.totalRockets]})]})]})})),p=a(15),g=a.n(p),b=r.a.lazy((function(){return a.e(3).then(a.bind(null,28))})),m=Object(c.a)((function(){return Object(n.useEffect)((function(){i.b.fetchData("Launches"),i.b.fetchData("Rockets")}),[]),Object(d.jsxs)("div",{className:g.a.app,children:[Object(d.jsx)(f,{}),Object(d.jsx)(n.Suspense,{fallback:Object(d.jsx)("h1",{children:"....Loading"}),children:Object(d.jsx)(b,{})})]})})),k=document.getElementById("root");o.a.render(Object(d.jsx)(n.StrictMode,{children:Object(d.jsx)(m,{})}),k)},5:function(e,t,a){"use strict";a.d(t,"b",(function(){return b})),a.d(t,"c",(function(){return g})),a.d(t,"a",(function(){return u}));var n=a(4),r=a.n(n),s=a(6),o=a(7),c=a(0),i=a(9),u=new(function(){function e(){Object(s.a)(this,e),this.favoritesDataStore=e.loadFromLocalStorage(),Object(c.o)(this,{favoritesDataStore:c.p,addItem:c.f.bound,deleteItem:c.f.bound})}return Object(o.a)(e,[{key:"updateLocalStorage",value:function(){localStorage.setItem("favorites",JSON.stringify(this.favoritesDataStore))}},{key:"addToFavorites",set:function(e){e.favoriteDate=Date.now(),this.addItem(e),this.updateLocalStorage()}},{key:"deleteFromFavorites",set:function(e){var t=this.favoritesDataStore.findIndex((function(t){return t.id===e}));this.deleteItem(t),this.updateLocalStorage()}},{key:"addItem",value:function(e){this.favoritesDataStore.push(e)}},{key:"deleteItem",value:function(e){this.favoritesDataStore.splice(e,1)}}],[{key:"loadFromLocalStorage",value:function(){var e=localStorage.getItem("favorites");return e?JSON.parse(e).sort((function(e,t){return t.favoriteDate-e.favoriteDate})):[]}}]),e}()),h=a(2),l=h.a.object({name:h.a.string(),id:h.a.string(),dataType:h.a.literal("Launches"),success:h.a.union([h.a.boolean(),h.a.null()]),flight_number:h.a.number(),links:h.a.object({webcast:h.a.union([h.a.string(),h.a.null()]),wikipedia:h.a.union([h.a.string(),h.a.null()]),patch:h.a.object({small:h.a.union([h.a.string(),h.a.null()])})}),rocket:h.a.string(),date_local:h.a.string(),date_unix:h.a.number(),details:h.a.string().nullable(),favoriteDate:h.a.number()}),d=h.a.array(l),f=h.a.object({name:h.a.string(),id:h.a.string(),flickr_images:h.a.array(h.a.string()),dataType:h.a.literal("Rockets"),description:h.a.string(),height:h.a.object({meters:h.a.number()}),diameter:h.a.object({meters:h.a.number()}),mass:h.a.object({kg:h.a.number()}),favoriteDate:h.a.number()}),p=h.a.array(f),g=new(function(){function e(){Object(s.a)(this,e),this.keyword="",this.filterCategory="",Object(c.o)(this,{keyword:c.p,addKeyword:c.f.bound,findItem:c.f,filterCategory:c.p,changeFilterCategory:c.f.bound,filteredData:c.g})}return Object(o.a)(e,[{key:"addKeyword",value:function(e){this.keyword=e}},{key:"findItem",value:function(e){var t=new RegExp(this.keyword,"i");return e.name.match(t)}},{key:"changeFilterCategory",value:function(e){this.filterCategory=e}},{key:"filteredData",get:function(){var e=this;return"Favorites"===b.currentCategory?u.favoritesDataStore.filter((function(t){return""===e.filterCategory||t.dataType===e.filterCategory})).filter((function(t){return!e.keyword||e.findItem(t)})):b.currentData}}]),e}()),b=new(function(){function e(){Object(s.a)(this,e),this._isLoading=!0,this._page=1,this._selectedCategory="Launches",this._selectedItemId=null,this._rocket=void 0,this.sidebarIsOpen=!1,this.launchesItems=[],this.rocketsItems=[],Object(c.o)(this,{_isLoading:c.p,_page:c.p,_selectedItemId:c.p,_selectedCategory:c.p,_rocket:c.p,sidebarIsOpen:c.p,currentCategory:c.g,launchesItems:c.p,rocketsItems:c.p,rocketItem:c.g,currentData:c.g,currentItem:c.g,fetchData:c.j.bound,loadMoreLaunches:c.f.bound,setIsLoading:c.f.bound,setCategory:c.f.bound,setLaunchesItems:c.f.bound,setRocketsItems:c.f.bound,setRocketItem:c.f.bound,setItemId:c.f.bound,toggleSidebar:c.f.bound})}return Object(o.a)(e,[{key:"currentCategory",get:function(){return this._selectedCategory}},{key:"currentData",get:function(){return"Rockets"===this._selectedCategory?this.rocketsItems:"Favorites"===this._selectedCategory?u.favoritesDataStore?u.favoritesDataStore:[]:this.launchesItems}},{key:"currentItem",get:function(){var e=this;return this.currentData.find((function(t){return t.id===e._selectedItemId}))||this.currentData[0]}},{key:"rocketItem",get:function(){return this._rocket}},{key:"changeCategory",set:function(e){this.setCategory(e),this.setItemId(null),g.changeFilterCategory("")}},{key:"changeItemId",set:function(e){this.setItemId(e)}},{key:"setCategory",value:function(e){this._selectedCategory=e}},{key:"setItemId",value:function(e){this._selectedItemId=e}},{key:"setRocketItem",value:function(e){this._rocket=this.rocketsItems.find((function(t){return t.id===e}))}},{key:"setLaunchesItems",value:function(e){this.launchesItems=this.launchesItems.concat(d.parse(e))}},{key:"setRocketsItems",value:function(e){this.rocketsItems=p.parse(e)}},{key:"setIsLoading",value:function(e){this._isLoading=e}},{key:"fetchData",value:r.a.mark((function e(t){var a,n=this,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:this._page,this.setIsLoading(!0),"Launches"!==t){e.next=5;break}return e.next=5,i.a.fetchLaunches(a).then((function(e){n.setLaunchesItems(e),n.setIsLoading(!1)})).catch((function(e){return console.log(e,"Error FETCH"),!1}));case 5:if("Rockets"!==t){e.next=8;break}return e.next=8,i.a.fetchRockets().then((function(e){n.setRocketsItems(e),n.setIsLoading(!1)})).catch((function(e){return console.log(e,"Error")}));case 8:case"end":return e.stop()}}),e,this)}))},{key:"toggleSidebar",value:function(e){this.sidebarIsOpen=e}},{key:"loadMoreLaunches",value:function(){this._page++,this.fetchData("Launches")}}]),e}())},9:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(4),r=a.n(n),s=a(8),o=a(13),c=a(6),i=a(7),u=a(0),h=new(function(){function e(){Object(c.a)(this,e),this.totalLaunches=0,this.totalRockets=0,this.errorMessage="",Object(u.o)(this,{updateTotalLaunches:u.f.bound,updateTotalRockets:u.f.bound,totalLaunches:u.p,totalRockets:u.p,errorMessage:u.p,updateErrorMessage:u.f.bound})}return Object(i.a)(e,[{key:"_getData",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.path,n=t.data,o=t.config,e.prev=1,e.next=4,fetch("".concat("https://api.spacexdata.com/v4/").concat(a),Object(s.a)(Object(s.a)({},o),{},{body:JSON.stringify(n),headers:{"Content-type":"application/json"}}));case 4:return c=e.sent,e.next=7,c.json();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),this.updateErrorMessage("Error! Don't get data from server");case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchRockets",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._getData({path:"rockets/query",data:{options:{limit:4}},config:{method:"POST"}});case 3:return t=e.sent,this.updateTotalRockets(t.totalDocs),e.abrupt("return",this._transformRocketsData(t.docs));case 8:e.prev=8,e.t0=e.catch(0),console.error("Loading rockets error: ",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLaunches",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._getData({path:"launches/query",data:{options:{limit:15,sort:{date_local:"desc"},page:t,pagination:!0}},config:{method:"POST"}});case 3:return a=e.sent,this.updateTotalLaunches(a.totalDocs),e.abrupt("return",this._transformLaunchesData(a.docs));case 8:e.prev=8,e.t0=e.catch(0),console.error("Loading rockets error: ",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_transformLaunchesData",value:function(e){return e.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{dataType:"Launches",favoriteDate:0})}))}},{key:"_transformRocketsData",value:function(e){return e.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{dataType:"Rockets",favoriteDate:0})}))}},{key:"updateTotalLaunches",value:function(e){this.totalLaunches=e}},{key:"updateTotalRockets",value:function(e){this.totalRockets=e}},{key:"updateErrorMessage",value:function(e){this.errorMessage=e}}]),e}())}},[[23,1,2]]]);
//# sourceMappingURL=main.39b9f036.chunk.js.map